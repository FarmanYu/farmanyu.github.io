<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>worker test</title>
<style type="text/css">
*{
    padding:0;
    margin:0
}
.container{
    width:980px;
    margin:0 auto;
    padding: 40px 0;
    text-align:left;
    line-height:30px;
}
.container h2{
    line-height:60px;
    height:60px;
}
</style>
</head>
<body>

<div class="container">
<h2>Web Worker</h2>
<p>圆周率公式为：π/4=1-1/3+1/5-1/7+1/9-1/11+…… +1/(n+1)-1/(n+3), n越大，计算的圆周率就越准确</p>
<p>圆周率：<span id="text"></span> 耗时:<span id="time">0</span>ms</p>
<p>输入最大N：<input type="text" id="n" value="1000"/> <input type="button" id="start" value="开始计算" /></p>
</div>
<script type="text/javascript">
function $(sid){
    return document.getElementById(sid);
}
var workerTest = new Worker("worker.js");
var starttime = 0;
var endTime  = 0;
$("start").onclick = function(){
    starttime = new Date().getTime();
    workerTest.postMessage($("n").value);
}
workerTest.onmessage = function(e){
  var data = e.data; 
  endTime = new Date().getTime();
  $("text").innerHTML = data;
  $("time").innerHTML = endTime - starttime;
}
</script>
</body>
</html>